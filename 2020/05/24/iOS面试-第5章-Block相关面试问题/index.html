<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>





    <link rel="dns-prefetch" href="https://hm.baidu.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            [iOS面试]第5章 Block相关面试问题 | 
        
        codeTao
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.jpg">
    <link rel="icon" href="/img/favicon.jpg">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",iOS面试">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/atelier-dune-light.min.css?ZfnESUNClnkZBE6Ec0djTA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="codeTao">
    <meta name="msapplication-starturl" content="http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="codeTao">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.jpg">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="[iOS面试]第5章 Block相关面试问题 | codeTao">
    <meta property="og:image" content="/img/favicon.jpg">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="iOS面试"> 

    
        <meta property="article:published_time" content="Sun May 24 2020 00:19:54 GMT+0800">
        <meta property="article:modified_time" content="Sun May 24 2020 01:36:42 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html",
    "headline": "[iOS面试]第5章 Block相关面试问题",
    "datePublished": "Sun May 24 2020 00:19:54 GMT+0800",
    "dateModified": "Sun May 24 2020 01:36:42 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "codeTao",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar2.png"
        },
        "description": "路上有多长 修行有多远 花叶融一钵 香积云外天"
    },
    "publisher": {
        "@type": "Organization",
        "name": "codeTao",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.jpg"
        }
    },
    "keywords": ",iOS面试",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?cc539da139de156c41df0dc0f7670373';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一、Block介绍"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、Block介绍</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#定义"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">定义:</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Block本质"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Block本质:</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Block调用"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Block调用:</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#二、截获变量。"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、截获变量。</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#被截获变量类型"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">被截获变量类型</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三、-block修饰符"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、__block修饰符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#笔试题的坑"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">笔试题的坑:</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#问题-在什么场景下使用-block修饰符呢？"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">问题:在什么场景下使用__block修饰符呢？</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#block-面试题"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">__block 面试题</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#问题-block修饰符起到了什么作用？block的机制是什么？"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">问题:block修饰符起到了什么作用？block的机制是什么？</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#四、Block的内存管理"><span class="post-toc-number">4.</span> <span class="post-toc-text">四、Block的内存管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1、Block类型"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">1、Block类型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2、Block的copy操作"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">2、Block的copy操作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3、生命周期"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">3、生命周期</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4、-forwarding存在的意义"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">4、__forwarding存在的意义</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#五、Block的循环引用"><span class="post-toc-number">5.</span> <span class="post-toc-text">五、Block的循环引用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#产生自循环引用"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">产生自循环引用 :</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#解决方法："><span class="post-toc-number">5.2.</span> <span class="post-toc-text">解决方法：</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Block面试总结"><span class="post-toc-number">6.</span> <span class="post-toc-text">Block面试总结</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                [iOS面试]第5章 Block相关面试问题
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar2.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>codeTao</strong>
        <span>5月 24, 2020</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/iOS面试/">iOS面试</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=[iOS面试]第5章 Block相关面试问题&url=http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html&pic=http://yoursite.com/img/favicon.jpg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=[iOS面试]第5章 Block相关面试问题&url=http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html&via=codeTao" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=codeTao&title=[iOS面试]第5章 Block相关面试问题&summary=&pics=http://yoursite.com/img/favicon.jpg&url=http://yoursite.com/2020/05/24/iOS面试-第5章-Block相关面试问题/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p>本文主讲Block相关面试问题，包括Block介绍、截获变量、__block修饰符、Block的内存管理、Block的循环引用。</p>
</blockquote>
<h3 id="一、Block介绍"><a href="#一、Block介绍" class="headerlink" title="一、Block介绍"></a>一、Block介绍</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义:"></a>定义:</h4><p>Block是将<code>函数</code>及其<code>执行上下文</code>封装起来的<code>对象</code>。</p>
<h4 id="Block本质"><a href="#Block本质" class="headerlink" title="Block本质:"></a>Block本质:</h4><p>源码解析:使用 <code>clang -rewrite-objc file.m</code> 查看编译之后的文件内容。</p>
<h4 id="Block调用"><a href="#Block调用" class="headerlink" title="Block调用:"></a>Block调用:</h4><p>Block调用就是函数的调用。</p>
<h3 id="二、截获变量。"><a href="#二、截获变量。" class="headerlink" title="二、截获变量。"></a>二、截获变量。</h3><h4 id="被截获变量类型"><a href="#被截获变量类型" class="headerlink" title="被截获变量类型"></a>被截获变量类型</h4><p>被截获变量类型: 包括局部变量(基本数据类型和对象类型)、静态局部变量、全部变量、静态全部变量。</p>
<p>问题:关于Block截获变量的特性，是否有理解？<br>答: 对不同的数据类型，截获方式各有不同<br>1.对于<code>基本数据类型</code>的<code>局部变量</code>截获其值<br>2.对于<code>对象</code>类型的局部变量<code>连同所有权修饰符</code>一起截获<br>3.以<code>指针方式</code>截获静态局部变量<br>4.<code>不截获</code>全局变量、静态全局变量</p>
<p>源码解析:使用 <code>clang -rewrite-objc -fobjc-arc file.m</code> 查看编译之后的文件内容。</p>
<pre><code>//面试题
    int multiplier = 6;
    int(^Block)(int) = ^int(int num){
        return num*multiplier;
    };
    multiplier = 4;
    NSLog(@&quot;result is %d&quot;,Block(2)); //输出结果 --&gt;result is 12
</code></pre><h3 id="三、-block修饰符"><a href="#三、-block修饰符" class="headerlink" title="三、__block修饰符"></a>三、__block修饰符</h3><p>一般情况下，对被截获变量进行<code>赋值</code>操作需添加<code>__block修饰符</code>。<br>注意：赋值不等于使用。</p>
<h4 id="笔试题的坑"><a href="#笔试题的坑" class="headerlink" title="笔试题的坑:"></a>笔试题的坑:</h4><pre><code>    NSMutableArray *array =[NSMutableArray array];
    void(^Block)(void) = ^{
        [array addObject:@&quot;123&quot;];
    };
    Block();  //该array为使用，只有赋值操作才需要__block 。

    NSMutableArray *array2 =nil;
    void(^Block2)(void) = ^{
        array2 = [NSMutableArray array];
    };
    Block2(); //该block为赋值，存在问题，会编译报错，需要用__block修饰被截获变量array2。
</code></pre><h4 id="问题-在什么场景下使用-block修饰符呢？"><a href="#问题-在什么场景下使用-block修饰符呢？" class="headerlink" title="问题:在什么场景下使用__block修饰符呢？"></a>问题:在什么场景下使用__block修饰符呢？</h4><ul>
<li>对截获变量进行赋值操作需要添加__block修饰符<strong>（赋值 != 使用）</strong></li>
<li>对局部变量（基本数据类型和对象类型）进行赋值需要__block修饰符</li>
<li>对静态局部变量、全局变量、静态全局变量不需要__block修饰符</li>
</ul>
<h4 id="block-面试题"><a href="#block-面试题" class="headerlink" title="__block 面试题"></a>__block 面试题</h4><pre><code>{
    __block int multiplier = 6;
    int(^Block)(int) = ^int(int num){
        return num*multiplier;
    };
    multiplier = 4;
    NSLog(@&quot;result is %d&quot;,Block(2));  //输出结果 --&gt;result is 8
}
</code></pre><h4 id="问题-block修饰符起到了什么作用？block的机制是什么？"><a href="#问题-block修饰符起到了什么作用？block的机制是什么？" class="headerlink" title="问题:block修饰符起到了什么作用？block的机制是什么？"></a>问题:<strong>block修饰符起到了什么作用？</strong>block的机制是什么？</h4><p>答: __block修饰变量变成了对象</p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-61660b692db8064e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-5cbaa11b1f12dfba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="栈上的__block变量"></p>
<p>栈上的<strong>block变量的</strong>forwarding指针是指向其自身的</p>
<h3 id="四、Block的内存管理"><a href="#四、Block的内存管理" class="headerlink" title="四、Block的内存管理"></a>四、Block的内存管理</h3><h4 id="1、Block类型"><a href="#1、Block类型" class="headerlink" title="1、Block类型"></a>1、Block类型</h4><p>Block类型：NSGlobalBlock、NSStackBlock、NSMallocBlock。</p>
<pre><code>impl.isa = &amp;_NSConcreteStackBlock;
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/126164-b46675e7cc38a286.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h4 id="2、Block的copy操作"><a href="#2、Block的copy操作" class="headerlink" title="2、Block的copy操作"></a>2、Block的copy操作</h4><p><img src="https://upload-images.jianshu.io/upload_images/126164-55162d0325ed5d91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>问题: 三种类型的block进行copy有什么效果?<br>答:</p>
<ul>
<li>对于数据区的block进行copy操作，什么也不做</li>
<li>对于栈区的block进行copy操作，在堆区产生block</li>
<li>对于堆区的block进行copy操作，会增加引用计数</li>
</ul>
<h4 id="3、生命周期"><a href="#3、生命周期" class="headerlink" title="3、生命周期"></a>3、生命周期</h4><p><strong>栈上Block的销毁</strong><br><img src="https://upload-images.jianshu.io/upload_images/126164-e08b0719b3c46c5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="栈上Block销毁"></p>
<ul>
<li>对于栈区的block，变量作用域结束，随之销毁</li>
</ul>
<p><strong>栈上Block的copy</strong><br><img src="https://upload-images.jianshu.io/upload_images/126164-55b4151535bc1ded.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="栈上Block的copy"></p>
<p>问题:如果对栈上block进行copy 操作后, MRC环境下,是否会引起内存泄漏?<br>答: 会引起内存泄漏. 栈上block在变量作用域结束后会销毁, 堆上block没有其他成员变量指向它, 这和alloc 出一个对象最后没有release效果是一样的, 会引起内存泄漏. </p>
<p><strong>栈上__block变量的copy</strong><br><img src="https://upload-images.jianshu.io/upload_images/126164-6d19292f3c61b545.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="栈上__block变量copy"></p>
<ul>
<li>如果对<code>栈上的__block变量</code>没有进行<code>copy</code>操作, <code>__forwarding指针</code>指向其自身, 同样上边一行代码,修改的是<code>栈上的__block变量</code></li>
<li>对<code>栈上的__block变量</code>进行<code>copy</code>操作后, 实际在堆上面也会产生一个<strong>block变量,内容完全一样,但是是两块不同内存控件.` 栈上</strong>block变量<code>的__forwarding指针指向是</code>堆上的<strong>block变量<code>,</code>堆上</strong>block变量`的__forwarding指针指向其自身.</li>
</ul>
<p>所以在对multiplier 整型值进行改变时 ,使用是转换出来的都是同一行代码 .</p>
<p>面试题:</p>
<pre><code>{
  __block int multiplier = 10;
  _blk = ^int(int num){
      return num * multiplier;
  }
  multiplier = 6;
  [self excuteBlock];
}
- (void)excuteBlock{
  int result = _blk(4);
  NSLog(@&quot;result is %d&quot;, result);  // result is 24
}
</code></pre><h4 id="4、-forwarding存在的意义"><a href="#4、-forwarding存在的意义" class="headerlink" title="4、__forwarding存在的意义"></a>4、__forwarding存在的意义</h4><ul>
<li>不管在任何内存位置，都可以顺利的访问同一个__block变量</li>
</ul>
<h3 id="五、Block的循环引用"><a href="#五、Block的循环引用" class="headerlink" title="五、Block的循环引用"></a>五、Block的循环引用</h3><p>Block循环引用（为什么会产生循环引用）在下图中，有什么问题？如何解决？</p>
<pre><code>//_strBlk _array 都为当前对象的成员变量
// _array 由strong修饰, _strBlk 由copy 修饰
{
    _array = [NSMutableArray arrayWithObject:@&quot;block&quot;];
    _strBlk = ^NSString* (NSString *num){
        return [NSString stringWithFormat:@&quot;helloc_%@&quot;, _array[0]];
    };
    _strBlk(@&quot;hello&quot;);
}
//产生自循环循环引用
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/126164-6b64fd64b91c242e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码循环引用分析"></p>
<h4 id="产生自循环引用"><a href="#产生自循环引用" class="headerlink" title="产生自循环引用 :"></a>产生自循环引用 :</h4><p>因为当前对象通过copy声明block，而在当前block中又使用到了当前对象的成员变量，因为会连带属性关键字一起截获，因为array是通过strong修饰，因此block中有一个strong类型的指针指向当前对象，产生循环引用</p>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><p>避免循环引用——在当前栈中用<strong>weak修饰的weakArray指针指向原对象的_array,在block中使用weakArray（因为截获的是一个</strong>weak类型）</p>
<pre><code>//解决
{
    _array = [NSMutableArray arrayWithObject:@&quot;block&quot;];
    __weak NSArray *weakArray = _array;
    _strBlk = ^NSString* (NSString *num){
        return [NSString stringWithFormat:@&quot;helloc_%@&quot;, weakArray[0]];
    };
    _strBlk(@&quot;hello&quot;);
}
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/126164-34b68d5baeee44de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>问题:block外部 为什么通过<strong>weak属性关键字修饰对象,就可以避免循环引用?<br>答:由于block截获变量是对象类型,会连同其所有权修饰符一起截获,在block外部定义变量是</strong>weak所有权修饰符,在block所产生结构体中所持有的变量也是__weak的</p>
<p>问题: （__block造成的循环引用）在下代码中，有什么问题？如何解决？</p>
<pre><code>{
    __block MCBlock *blockSelf = self;
    _blk = ^int(int num){
        //var = 2
        return num * blockSelf.var;
    };
    _blk(3);
}
</code></pre><p>答: </p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-6b26b5c0fa7fdbf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ARC下循环引用"></p>
<ul>
<li>在MRC中，不会产生循环引用</li>
<li>在ARC中，产生循环引用，引起内存泄漏</li>
</ul>
<p>解决:</p>
<pre><code>{
    __block MCBlock *blockSelf = self;
    _blk = ^int(int num){
        //var = 2
        int result = num * blockSelf.var
        blockSelf = nil;
        return result;
    };
    _blk(3);
}
</code></pre><h3 id="Block面试总结"><a href="#Block面试总结" class="headerlink" title="Block面试总结"></a>Block面试总结</h3><p>问题: 什么是block？<br>答:Block是将<code>函数</code>及其<code>执行上下文</code>封装起来的<code>对象</code>。</p>
<p>问题: 为什么Block会产生循环引用？<br>答:<br>1&gt;如果当前Block对当前对象的某一成员变量进行截获, block会对成员变量有强引用, 当前对象又对当前block有一个copy强引用, 就产生自循环引用问题.<br>可以通过声明对象的成员变量为 __weak 变量,来进行循环引用消除. </p>
<p>(因为当前对象通过copy声明block，而在当前block中又使用到了当前对象的成员变量，因为会连带属性关键字一起截获，如果成员变量使用strong修饰，因此block中有一个strong类型的指针指向当前对象，产生自循环引用.)</p>
<p>2&gt;如果定义__block说明符 ,在ARC中 会产生循环引用, 在MRC中不会产生循环引用.<br>可以在ARC中采取断环的方式解决循环引用,但是有个弊端,如果block 如果一直没有调用, 循环引用是没有办法消除的.</p>
<p>问题:怎样理解Block截获变量的特性？<br>答:(被截获类型的分类回答)<br>答: 对不同的数据类型，截获方式各有不同<br>1.对于基本数据类型的局部变量对其值进行截获<br>2.对于对象类型的局部变量连同所有权修饰符一起截获<br>3.对于静态局部变量以指针方式截获<br>4.对于全局变量、静态全局变量不截获.</p>
<p>问题: 你都遇见过哪些循环引用？你又是咋样解决的<br>答:<br>NSTimer循环引用.</p>
<p>Block循环引用:2方面<br>1&gt;block所捕获变量也是当前对象的成员变量, block 也是当前对象的成员变量,就会造成自循环引用. 采用避免循环引用方式, 加<strong>weak所有权修饰符,来避免循环引用.<br>2&gt;</strong>block也会造成循环引用, 在ARC中 会产生循环引用, 在MRC中不会产生循环引用.<br>可以在ARC中采取断环的方式解决循环引用,但是有个弊端,如果block 如果一直没有调用, 循环引用是没有办法消除的.</p>
<hr>
<hr>
<p>1、相互循环引用</p>
<pre><code>typedef void(^Block)(NSString*);
@interface ClassA()
{
    int age;
}
@property(nonatomic,strong)Block block;
@property(nonatomic,strong)NSString *temp;
@end
@implementation ClassA
- (void)viewDidLoad {
    [super viewDidLoad];
    self.block = ^(NSString * content) {
        self.temp = content;
        self-&gt;age = 15;
    };
}
-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event{
    self.block(@&quot;赵四&quot;);
}

</code></pre><p>(1)、如上代码，self持有block，而堆上的block又会持有self，所以会导致循环引用，这个例子非常好，因为xcode都能检测出来，报出警告：[capturing self strongly in this block is likely to lead to a retain cycle]，当然大部分循环引用的情况xcode是不会报警告的。<br>(2)、这时Block对象虽然捕获了weakSelf，延长了weakSelf这个局部变量的生命周期，但weakSelf是附有__weak修饰符的变量，它并不会持有对象，一旦它指向的对象被废弃了，它将自动被赋值为nil。在多线程情况下，可能weakSelf指向的对象会在Block执行前被废弃，这样可能顶多就是返回nil，但在有些情况下（譬如在Block中有移除KVO的观察者的逻辑，在执行到该逻辑前self就释放了）就会导致crash。这时可以在Block内部（第一句）再持有一次weakSelf指向的对象，保证在执行Block期间该对象不会被废弃，这就是所谓的 weak-strong。</p>
<p>解决这种循环引用的常用方式如下</p>
<pre><code>typedef void(^Block)(NSString*);
@interface ClassA()
{
    int age;
}
@property(nonatomic,strong)Block block;
@property(nonatomic,strong)NSString *temp;
@end
@implementation ClassA
- (void)viewDidLoad {
    [super viewDidLoad];
    __weak typeof(self) weakSelf = self;
    self.block = ^(NSString * content) {
        __strong typeof(weakSelf)strongSelf = weakSelf;
        strongSelf.temp = content;
        strongSelf-&gt;age = 15;
    };
}
-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event{
    self.block(@&quot;赵四&quot;);
}

</code></pre><p>2、多循环引用</p>
<pre><code>typedef void(^Block)(NSString*);
@interface ClassB : UIViewController
@property(nonatomic,strong)Block block;

</code></pre><pre><code>#import &quot;ClassA.h&quot;
#import &quot;ClassB.h&quot;

@interface ClassA()
@property(nonatomic,strong)ClassB *classB;
@property(nonatomic,strong)NSString *temp;
@end
@implementation ClassA
- (void)viewDidLoad {
    [super viewDidLoad];
    self.classB = [[ClassB alloc]init];
    self.classB.block = ^(NSString *content) {
        self.temp = content;
    };
}

-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event{
    self.classB.block(@&quot;赵四&quot;);
}
@end

</code></pre><p>如上代码，ClassA持有ClassB，ClassB持有block，而堆上的block又会持有ClassA，所以会导致循环引用。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script src="/js/md5.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: '831359b6ab3a9f127d1b',
            clientSecret: '0022bff5442e5f0135eeddf065b6d72eff9f5ae3',
            repo: 'honkerSK.github.io',
            owner: 'honkerSK',
            admin: ['honkerSK'],
            // facebook-like distraction free mode
            id: md5(location.pathname),
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>

</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2020/05/24/iOS面试-第6章-多线程相关面试问题/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2020/05/23/iOS面试-第4章-内存管理相关面试问题/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar2.png" alt="codeTao's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        geeksk54@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: geeksk54@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/05/">五月 2020<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">39</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/08/">八月 2018<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Tool/">Tool<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS/">iOS<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS文档/">iOS文档<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS笔记/">iOS笔记<span class="sidebar_archives-count">40</span></a></li><li><a class="sidebar_archives-link" href="/categories/前端/">前端<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/随笔/">随笔<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">tab</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">send</i>
                
                时间轴
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">96</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;codeTao
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
