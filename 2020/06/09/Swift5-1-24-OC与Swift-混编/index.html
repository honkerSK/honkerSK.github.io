<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>





    <link rel="dns-prefetch" href="https://hm.baidu.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            [Swift5.1] 24-OC与Swift 混编 | 
        
        codeTao
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.jpg">
    <link rel="icon" href="/img/favicon.jpg">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",Swift5.1">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/atelier-dune-light.min.css?ZfnESUNClnkZBE6Ec0djTA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="codeTao">
    <meta name="msapplication-starturl" content="http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="codeTao">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.jpg">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="[Swift5.1] 24-OC与Swift 混编 | codeTao">
    <meta property="og:image" content="/img/favicon.jpg">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="Swift5.1"> 

    
        <meta property="article:published_time" content="Tue Jun 09 2020 01:32:22 GMT+0800">
        <meta property="article:modified_time" content="Tue Jun 09 2020 01:40:32 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html",
    "headline": "[Swift5.1] 24-OC与Swift 混编",
    "datePublished": "Tue Jun 09 2020 01:32:22 GMT+0800",
    "dateModified": "Tue Jun 09 2020 01:40:32 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "codeTao",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar2.png"
        },
        "description": "路上有多长 修行有多远 花叶融一钵 香积云外天"
    },
    "publisher": {
        "@type": "Organization",
        "name": "codeTao",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.jpg"
        }
    },
    "keywords": ",Swift5.1",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?cc539da139de156c41df0dc0f7670373';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#MARK、TODO、FIXME"><span class="post-toc-number">1.</span> <span class="post-toc-text">MARK、TODO、FIXME</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#条件编译"><span class="post-toc-number">2.</span> <span class="post-toc-text">条件编译</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#打印"><span class="post-toc-number">3.</span> <span class="post-toc-text">打印</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#系统版本检测"><span class="post-toc-number">4.</span> <span class="post-toc-text">系统版本检测</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#API可用性说明"><span class="post-toc-number">5.</span> <span class="post-toc-text">API可用性说明</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#iOS程序的入口"><span class="post-toc-number">6.</span> <span class="post-toc-text">iOS程序的入口</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Swift调用OC"><span class="post-toc-number">7.</span> <span class="post-toc-text">Swift调用OC</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Swift调用OC-1"><span class="post-toc-number">8.</span> <span class="post-toc-text">Swift调用OC</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Swift调用OC-–-silgen-name"><span class="post-toc-number">9.</span> <span class="post-toc-text">Swift调用OC – @_silgen_name</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OC调用Swift"><span class="post-toc-number">10.</span> <span class="post-toc-text">OC调用Swift</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OC调用Swift-–-objc"><span class="post-toc-number">11.</span> <span class="post-toc-text">OC调用Swift – @objc</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#选择器（Selector）"><span class="post-toc-number">12.</span> <span class="post-toc-text">选择器（Selector）</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                [Swift5.1] 24-OC与Swift 混编
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar2.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>codeTao</strong>
        <span>6月 09, 2020</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Swift5-1/">Swift5.1</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=[Swift5.1] 24-OC与Swift 混编&url=http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html&pic=http://yoursite.com/img/favicon.jpg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=[Swift5.1] 24-OC与Swift 混编&url=http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html&via=codeTao" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=codeTao&title=[Swift5.1] 24-OC与Swift 混编&summary=&pics=http://yoursite.com/img/favicon.jpg&url=http://yoursite.com/2020/06/09/Swift5-1-24-OC与Swift-混编/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="MARK、TODO、FIXME"><a href="#MARK、TODO、FIXME" class="headerlink" title="MARK、TODO、FIXME"></a>MARK、TODO、FIXME</h3><pre><code>// MARK: 类似于OC中的 #pragma mark
// MARK: - 类似于OC中的 #pragma mark -
// TODO: 用于标记未完成的任务
// FIXME: 用于标记待修复的问题
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/126164-80e9280690880554.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-28e3b753077e0902.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-58d9db0d3f6d84a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-61ff08e692f2190b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>补充:</p>
<ul>
<li>使用#warning(“undo”) 标记未做的事情</li>
<li>定义有返回值函数, 如果没写完可以用<code>fatalError()</code>占位</li>
</ul>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">Int</span> <span class="token punctuation">{</span>
    #<span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"undo"</span><span class="token punctuation">)</span>
    <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="条件编译"><a href="#条件编译" class="headerlink" title="条件编译"></a>条件编译</h3><pre class=" language-swift"><code class="language-swift"><span class="token comment" spellcheck="true">// 操作系统：macOS\iOS\tvOS\watchOS\Linux\Android\Windows\FreeBSD</span>
#<span class="token keyword">if</span> <span class="token function">os</span><span class="token punctuation">(</span>macOS<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">os</span><span class="token punctuation">(</span>iOS<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// CPU 架 构 ：i386\x86_64\arm\arm64</span>
#elseif <span class="token function">arch</span><span class="token punctuation">(</span>x86_64<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">arch</span><span class="token punctuation">(</span>arm64<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// swift版本</span>
#elseif <span class="token function">swift</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">swift</span><span class="token punctuation">(</span><span class="token operator">>=</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 模拟器</span>
#elseif <span class="token function">targetEnvironment</span><span class="token punctuation">(</span>simulator<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 可以导入某模块</span>
#elseif <span class="token function">canImport</span><span class="token punctuation">(</span><span class="token builtin">Foundation</span><span class="token punctuation">)</span>  #<span class="token keyword">else</span>
#endif
</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-89f2dade06b1ba3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<pre class=" language-swift"><code class="language-swift">#<span class="token keyword">if</span> <span class="token constant">DEBUG</span>
<span class="token comment" spellcheck="true">// debug模式</span>
#<span class="token keyword">else</span>
<span class="token comment" spellcheck="true">// release模式 </span>
#endif
</code></pre>
<pre class=" language-swift"><code class="language-swift">#<span class="token keyword">if</span> <span class="token constant">TEST</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>
#endif

#<span class="token keyword">if</span> <span class="token constant">OTHER</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"other"</span><span class="token punctuation">)</span>
#endif
</code></pre>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><pre class=" language-swift"><code class="language-swift"><span class="token keyword">func</span> log<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">_</span> msg<span class="token punctuation">:</span> T<span class="token punctuation">,</span>
            file<span class="token punctuation">:</span> <span class="token builtin">NSString</span> <span class="token operator">=</span> #file<span class="token punctuation">,</span>
            line<span class="token punctuation">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> #line<span class="token punctuation">,</span>
            fn<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> #function<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    #<span class="token keyword">if</span> <span class="token constant">DEBUG</span>
    <span class="token keyword">let</span> <span class="token keyword">prefix</span> <span class="token operator">=</span> <span class="token string">"<span class="token interpolation"><span class="token delimiter variable">\(</span>file<span class="token punctuation">.</span>lastPathComponent<span class="token delimiter variable">)</span></span>_<span class="token interpolation"><span class="token delimiter variable">\(</span>line<span class="token delimiter variable">)</span></span>_<span class="token interpolation"><span class="token delimiter variable">\(</span>fn<span class="token delimiter variable">)</span></span>:"</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">prefix</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
    #endif
<span class="token punctuation">}</span>
</code></pre>
<h3 id="系统版本检测"><a href="#系统版本检测" class="headerlink" title="系统版本检测"></a>系统版本检测</h3><pre class=" language-swift"><code class="language-swift"><span class="token keyword">if</span> #<span class="token function">available</span><span class="token punctuation">(</span>iOS <span class="token number">10</span><span class="token punctuation">,</span> macOS <span class="token number">10.12</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 对于iOS平台，只在iOS10及以上版本执行</span>
    <span class="token comment" spellcheck="true">// 对于macOS平台，只在macOS 10.12及以上版本执行</span>
    <span class="token comment" spellcheck="true">// 最后的*表示在其他所有平台都执行</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="API可用性说明"><a href="#API可用性说明" class="headerlink" title="API可用性说明"></a>API可用性说明</h3><pre class=" language-swift"><code class="language-swift">@<span class="token function">available</span><span class="token punctuation">(</span>iOS <span class="token number">10</span><span class="token punctuation">,</span> macOS <span class="token number">10.15</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">Student</span> <span class="token punctuation">{</span>
    @<span class="token function">available</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span> unavailable<span class="token punctuation">,</span> renamed<span class="token punctuation">:</span> <span class="token string">"study"</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function">study_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    @<span class="token function">available</span><span class="token punctuation">(</span>iOS<span class="token punctuation">,</span> deprecated<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">)</span>
    @<span class="token function">available</span><span class="token punctuation">(</span>macOS<span class="token punctuation">,</span> deprecated<span class="token punctuation">:</span> <span class="token number">10.12</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>更多用法参考：<a href="https://docs.swift.org/swift-book/ReferenceManual/Attributes.html" target="_blank" rel="noopener">https://docs.swift.org/swift-book/ReferenceManual/Attributes.html</a></p>
<h3 id="iOS程序的入口"><a href="#iOS程序的入口" class="headerlink" title="iOS程序的入口"></a>iOS程序的入口</h3><ul>
<li><p>在AppDelegate上面默认有个<code>@UIApplicationMain</code>标记，这表示<br>编译器自动生成入口代码（main函数代码），自动设置AppDelegate为APP的代理</p>
</li>
<li><p>也可以删掉<code>@UIApplicationMain</code>，自定义入口代码：新建一个main.swift文件</p>
</li>
</ul>
<pre class=" language-swift"><code class="language-swift"><span class="token comment" spellcheck="true">//  main.swift</span>
<span class="token comment" spellcheck="true">//  TestDemo</span>
<span class="token keyword">import</span> <span class="token builtin">UIKit</span>

<span class="token keyword">class</span> <span class="token class-name">MyApplication</span><span class="token punctuation">:</span> <span class="token builtin">UIApplication</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">UIApplicationMain</span><span class="token punctuation">(</span><span class="token builtin">CommandLine</span><span class="token punctuation">.</span>argc<span class="token punctuation">,</span>
                  <span class="token builtin">CommandLine</span><span class="token punctuation">.</span>unsafeArgv<span class="token punctuation">,</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token builtin">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token builtin">AppDelegate</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="Swift调用OC"><a href="#Swift调用OC" class="headerlink" title="Swift调用OC"></a>Swift调用OC</h3><ul>
<li>1&gt; 新建1个桥接头文件，文件名格式默认为：<strong>{targetName}-Bridging-Header.h</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-14fdf07fdc0cfb57.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>如果直接创建OC类文件, 会提示(如下图)并自动创建 {targetName}-Bridging-Header.h文件</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-a3fa074b7a6b8d8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>2&gt; 在 {targetName}-Bridging-Header.h 文件中 #import OC需要暴露给Swift的内容</li>
</ul>
<pre><code>#import &quot;Person.h&quot;
</code></pre><h3 id="Swift调用OC-1"><a href="#Swift调用OC-1" class="headerlink" title="Swift调用OC"></a>Swift调用OC</h3><ul>
<li>1&gt; Person.h 代码</li>
</ul>
<pre><code>int sum(int a, int b);

@interface Person : NSObject
@property (nonatomic, assign) NSInteger age;
@property (nonatomic, copy) NSString *name;

- (instancetype)initWithAge:(NSInteger)age name:(NSString *)name;
+ (instancetype)personWithAge:(NSInteger)age name:(NSString *)name;

- (void)run;
+ (void)run;

- (void)eat:(NSString *)food other:(NSString *)other;
+ (void)eat:(NSString *)food other:(NSString *)other;
@end
</code></pre><ul>
<li>2&gt; Person.m 代码</li>
</ul>
<pre><code>@implementation Person
- (instancetype)initWithAge:(NSInteger)age name:(NSString *)name {
    if (self = [super init]) {
        self.age = age;
        self.name = name;
    }
    return self;
}
+ (instancetype)personWithAge:(NSInteger)age name:(NSString *)name {
    return [[self alloc] initWithAge:age name:name];
}

+ (void)run { NSLog(@&quot;Person +run&quot;); }
-  (void)run { NSLog(@&quot;%zd %@ -run&quot;, _age, _name); }

+ (void)eat:(NSString *)food other:(NSString *)other {
    NSLog(@&quot;Person +eat %@ %@&quot;, food, other);
}
- (void)eat:(NSString *)food other:(NSString *)other {
    NSLog(@&quot;%zd %@-eat %@ %@&quot;, _age, _name, food, other);
}
@end

int sum(int a, int b) { return a + b; }
</code></pre><ul>
<li>3&gt; main.swift 中 swift代码</li>
</ul>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span>age<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>
p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Rose"</span>
p<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 18 Rose -run</span>
p<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token string">"Water"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 18 Rose -eat Apple Water</span>

<span class="token builtin">Person</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Person +run</span>
<span class="token builtin">Person</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"Pizza"</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token string">"Banana"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Person +eat Pizza Banana</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 30</span>
</code></pre>
<h3 id="Swift调用OC-–-silgen-name"><a href="#Swift调用OC-–-silgen-name" class="headerlink" title="Swift调用OC – @_silgen_name"></a>Swift调用OC – @_silgen_name</h3><p><strong>应用场景1:</strong></p>
<ul>
<li>如果C语言暴露给Swift的函数名跟Swift中的其他函数名冲突了</li>
<li>可以在Swift中使用 <code>@_silgen_name</code> 修改C函数名</li>
</ul>
<pre><code>// C语言
int sum(int a, int b) {
    return a + b;
}
</code></pre><pre class=" language-swift"><code class="language-swift"><span class="token comment" spellcheck="true">// Swift  </span>
@<span class="token function">_silgen_name</span><span class="token punctuation">(</span><span class="token string">"sum"</span><span class="token punctuation">)</span> <span class="token keyword">func</span> <span class="token function">swift_sum</span><span class="token punctuation">(</span><span class="token number">_</span> v1<span class="token punctuation">:</span> <span class="token builtin">Int32</span><span class="token punctuation">,</span> <span class="token number">_</span> v2<span class="token punctuation">:</span> <span class="token builtin">Int32</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">Int32</span>
<span class="token comment" spellcheck="true">// C语言函数名, 重命名函数 swift_sum</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">swift_sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 30</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 30</span>
</code></pre>
<p><strong>应用场景2</strong>:<br> <code>_silgen_name</code>可以将系统私有函数重命名后使用.</p>
<h3 id="OC调用Swift"><a href="#OC调用Swift" class="headerlink" title="OC调用Swift"></a>OC调用Swift</h3><ul>
<li>Xcode已经默认生成一个用于OC调用Swift的头文件，文件名格式是：    {targetName}-Swift.h</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-4c81f867f57142d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>OC项目中如果直接创建swift类文件, 会提示(如下图)并自动创建 {targetName}-Bridging-Header.h文件</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/126164-1433357fe1d57c33.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>1&gt; Car.swift 文件</li>
</ul>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token builtin">Foundation</span>

@objcMembers <span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price<span class="token punctuation">:</span> <span class="token builtin">Double</span>
    <span class="token keyword">var</span> band<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>price<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> band<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
        <span class="token keyword">self</span><span class="token punctuation">.</span>band <span class="token operator">=</span> band
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> band<span class="token punctuation">,</span> <span class="token string">"run"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Car run"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token builtin">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> band<span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>2&gt; Swift暴露给OC的类最终继承自NSObject</li>
<li>3&gt; 使用<code>@objc</code>修饰需要暴露给OC的成员</li>
<li>4&gt; 使用<code>@objcMembers</code>修饰类<br>代表默认所有成员都会暴露给OC（包括扩展中定义的成员）<br>最终是否成功暴露，还需要考虑成员自身的访问级别</li>
</ul>
<ul>
<li>6&gt; OC代码<br>OC文件中导入<code>#import &quot;Test-Swift.h&quot;</code></li>
</ul>
<pre class=" language-swift"><code class="language-swift">#<span class="token keyword">import</span> <span class="token string">"Test-Swift.h"</span>
int <span class="token function">sum</span><span class="token punctuation">(</span>int a<span class="token punctuation">,</span> int b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">Car</span> <span class="token operator">*</span>c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">Car</span> alloc<span class="token punctuation">]</span> initWithPrice<span class="token punctuation">:</span><span class="token number">10.5</span> band<span class="token punctuation">:</span>@<span class="token string">"BMW"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>band <span class="token operator">=</span> @<span class="token string">"Bently"</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">108.5</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>c run<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 108.5 Bently run  [c test]; // 108.5 Bently test  [Car run]; // Car run</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="OC调用Swift-–-objc"><a href="#OC调用Swift-–-objc" class="headerlink" title="OC调用Swift – @objc"></a>OC调用Swift – @objc</h3><p>可以通过 <code>@objc</code> 重命名Swift暴露给OC的符号名（类名、属性名、函数名等）</p>
<pre class=" language-swift"><code class="language-swift">@<span class="token function">objc</span><span class="token punctuation">(</span><span class="token builtin">Car</span><span class="token punctuation">)</span>
@objcMembers <span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price<span class="token punctuation">:</span> <span class="token builtin">Double</span>
    @<span class="token function">objc</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token keyword">var</span> band<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>price<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> band<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
        <span class="token keyword">self</span><span class="token punctuation">.</span>band <span class="token operator">=</span> band
    <span class="token punctuation">}</span>
    @<span class="token function">objc</span><span class="token punctuation">(</span>drive<span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> band<span class="token punctuation">,</span> <span class="token string">"run"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Car run"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">extension</span> <span class="token builtin">Car</span> <span class="token punctuation">{</span>  @<span class="token function">objc</span><span class="token punctuation">(</span>exec<span class="token punctuation">:</span>v2<span class="token punctuation">:</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> band<span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code>Car *c = [[Car alloc] initWithPrice:10.5 band:@&quot;BMW&quot;];
c.name = @&quot;Bently&quot;;
c.price = 108.5;
[c drive]; // 108.5 Bently run
[c exec:10 v2:20]; // 108.5 Bently test
[Car run]; // Car run
</code></pre><p><strong>思考:</strong><br>1.为什么Swfit暴露给OC类最终要继承自NSObject?<br>答:<br>OC依赖于runtime机制,runtime要求类有isa指针, 使用消息传递机制就需要继承自NSObject</p>
<p>2.p.run()底层是怎么调用的?反过来,OC调用Swift底层又是如何调用?<br>答:运行runtime机制, 执行obj_msgSend</p>
<p>3.car.run()底层是怎么调用的?<br>答:<br>swift中, 调用暴露给OC类的方法,使用虚表.<br>如果实在要用OC的runtime机制, 可以在方法前加<code>dynamic</code>关键字. </p>
<h3 id="选择器（Selector）"><a href="#选择器（Selector）" class="headerlink" title="选择器（Selector）"></a>选择器（Selector）</h3><ul>
<li>Swift中依然可以使用选择器，使用<code>#selector(name)</code>定义一个选择器</li>
<li>必须是被<code>@objcMembers</code>或<code>@objc</code>修饰的方法才可以定义选择器</li>
</ul>
<pre class=" language-swift"><code class="language-swift">@objcMembers <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">test1</span><span class="token punctuation">(</span>v1<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">test2</span><span class="token punctuation">(</span>v1<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> v2<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"test2(v1:v2:)"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token number">_</span> v1<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token number">_</span> v2<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"test2(_:_:)"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">perform</span><span class="token punctuation">(</span>#<span class="token function">selector</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">perform</span><span class="token punctuation">(</span>#<span class="token function">selector</span><span class="token punctuation">(</span><span class="token function">test1</span><span class="token punctuation">(</span>v1<span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">perform</span><span class="token punctuation">(</span>#<span class="token function">selector</span><span class="token punctuation">(</span><span class="token function">test2</span><span class="token punctuation">(</span>v1<span class="token punctuation">:</span>v2<span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">perform</span><span class="token punctuation">(</span>#<span class="token function">selector</span><span class="token punctuation">(</span><span class="token function">test2</span><span class="token punctuation">(</span><span class="token number">_</span><span class="token punctuation">:</span><span class="token number">_</span><span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">perform</span><span class="token punctuation">(</span>#<span class="token function">selector</span><span class="token punctuation">(</span>test2 <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">Void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script src="/js/md5.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: '831359b6ab3a9f127d1b',
            clientSecret: '0022bff5442e5f0135eeddf065b6d72eff9f5ae3',
            repo: 'honkerSK.github.io',
            owner: 'honkerSK',
            admin: ['honkerSK'],
            // facebook-like distraction free mode
            id: md5(location.pathname),
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>

</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2020/06/09/Swift5-1-25-Swift-常规用法/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2020/06/08/Swift5-1-23-模式匹配/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar2.png" alt="codeTao's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        geeksk54@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: geeksk54@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/05/">五月 2020<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">39</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/08/">八月 2018<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Tool/">Tool<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS/">iOS<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS文档/">iOS文档<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS笔记/">iOS笔记<span class="sidebar_archives-count">40</span></a></li><li><a class="sidebar_archives-link" href="/categories/前端/">前端<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/随笔/">随笔<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">tab</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">send</i>
                
                时间轴
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">95</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;codeTao
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
